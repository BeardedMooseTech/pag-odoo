<odoo>
    <template id="report_pag_scoreboard">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <div class="page">
                    <h1 style="text-align: center;">Scorecard Report</h1>

                    <table class="table table-bordered" style="border-collapse: collapse; width: 100%;">
                        <thead>
                            <tr>
                                <th style="text-align: center;">TARGET TO IMPROVE</th>
                                <th style="text-align: center;">Owner</th>
                                <th></th>
                                <th style="text-align: center;">JAN</th>
                                <th style="text-align: center;">FEB</th>
                                <th style="text-align: center;">MAR</th>
                                <th style="text-align: center;">APR</th>
                                <th style="text-align: center;">MAY</th>
                                <th style="text-align: center;">JUN</th>
                                <th style="text-align: center;">JUL</th>
                                <th style="text-align: center;">AUG</th>
                                <th style="text-align: center;">SEP</th>
                                <th style="text-align: center;">OCT</th>
                                <th style="text-align: center;">NOV</th>
                                <th style="text-align: center;">DEC</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="docs" t-as="doc">
                                <t t-foreach="doc.child_task_ids" t-as="subtask">
                                    <tr>
                                        <td style="text-align: center; font-size: 13px;">
                                            <t t-esc="subtask.name"/>
                                        </td>
                                        <td style="text-align: center; font-size: 13px;">
                                            <t t-esc="doc.task.name"/>
                                        </td>
                                        <td style="padding: 0; font-size: 13px;">
                                            <div style="text-align: center; height: 50%; border-bottom: 1px solid black; padding-top: 5px; display: flex; align-items: center; justify-content: center;">
                                                Plan
                                            </div>
                                            <div style="text-align: center; height: 50%; padding-top: 5px; display: flex; align-items: center; justify-content: center;">
                                                Actual
                                            </div>
                                        </td>


                                        <t t-set="months"
                                           t-value="['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 'JUL', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC']"/>
                                        <t t-foreach="months" t-as="month_name">
                                            <td style="padding: 0; font-size: 13px; height: 50px;text-align: center;">
                                                <t t-set="month_task"
                                                   t-value="subtask.child_ids.filtered(lambda m: month_name.lower() in m.name.lower())"/>
                                                <t t-if="month_task">
                                                    <t t-set="month_obj" t-value="month_task[0]"/>
                                                    <div style="text-align: center; height: 50%; border-bottom: 1px solid black;">
                                                        <t t-esc="month_obj.plan_1 or 0"/>
                                                    </div>
                                                    <div style="text-align: center; height: 50%;"
                                                         t-attf-style="background-color: #{'green' if (month_obj.actual_1 or 0) &gt;= (month_obj.plan_1 or 0) else ('red' if (month_obj.actual_1 or 0) &lt;= (month_obj.plan_1 or 0) else '')}; color: white; padding-top: 5px;">
                                                        <t t-esc="month_obj.actual_1 or 0"/>
                                                    </div>

                                                </t>
                                                <t t-if="not month_task">
                                                    <div style="text-align: center; height: 50%; border-bottom: 1px solid black;">
                                                        0
                                                    </div>
                                                    <div style="text-align: center; height: 50%;">0</div>
                                                </t>
                                            </td>
                                        </t>
                                    </tr>
                                </t>
                            </t>
                        </tbody>
                    </table>
                </div>
            </t>
        </t>
    </template>

    <record id="paperformat_pag_landscape" model="report.paperformat">
        <field name="name">PAU Landscape Format</field>
        <field name="format">A4</field>
        <field name="orientation">Landscape</field>
        <field name="margin_top">10</field>
        <field name="margin_bottom">10</field>
        <field name="margin_left">10</field>
        <field name="margin_right">10</field>
        <field name="default" eval="False"/>
    </record>

    <record id="action_pag_scoreboard_report" model="ir.actions.report">
        <field name="name">Scoreboard Report</field>
        <field name="model">scoreboard.wizard</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">pag_customizations.report_pag_scoreboard</field>
        <field name="report_file">pag_customizations.report_pag_scoreboard</field>
        <field name="paperformat_id" ref="pag_customizations.paperformat_pag_landscape"/>
        <field name="binding_model_id" ref="project.model_project_task"/>
    </record>
</odoo>