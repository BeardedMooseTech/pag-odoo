<odoo>
    <template id="report_pag_scoreboard">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <div class="page">
                    <h1 style="text-align: center;">Scorecard Report for 
                        <t t-out="docs.task.name"/>
                    </h1>
                    <table class="table table-bordered" style="border-collapse: collapse; width: 100%;border: 1px solid black;">
                        <thead>
                            <tr style="border: 1px solid black;">
                                <th style="text-align: center;">TARGET TO IMPROVE</th>
                                <th style="text-align: center;">Owner</th>
                                <th></th>
                                <th style="text-align: center;">JAN</th>
                                <th style="text-align: center;">FEB</th>
                                <th style="text-align: center;">MAR</th>
                                <th style="text-align: center;">APR</th>
                                <th style="text-align: center;">MAY</th>
                                <th style="text-align: center;">JUN</th>
                                <th style="text-align: center;">JUL</th>
                                <th style="text-align: center;">AUG</th>
                                <th style="text-align: center;">SEP</th>
                                <th style="text-align: center;">OCT</th>
                                <th style="text-align: center;">NOV</th>
                                <th style="text-align: center;">DEC</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-set="months" t-value="['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 'JUL', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC']"/>
                            <t t-foreach="docs" t-as="doc">
                                <t t-foreach="doc.child_task_ids" t-as="subtask">
                                    <!-- Plan row -->
                                    <tr style="text-align: center;vertical-align: top !important;border: 1px solid black;" >
                                        <td rowspan="2" style="text-align: center; font-size: 14px;">
                                            <t t-esc="subtask.name"/>
                                        </td>
                                        <td rowspan="2" style="text-align: center; font-size: 13px;">
                                            <t t-esc="(doc.task.name).upper()"/>
                                        </td>
                                        <td style="text-align: center;vertical-align: top !important;padding-top: 5px;">Plan</td>
                                        <t t-foreach="months" t-as="month_name">
                                            <td style="text-align: center; font-size: 13px;vertical-align: top !important; ">
                                                <t t-set="month_task" t-value="subtask.child_ids.filtered(lambda m: month_name.lower() in m.name.lower())"/>
                                                <t t-if="month_task">
                                                    <t style="text-align: center; font-size: 13px;vertical-align: top !important;" t-esc="month_task[0].plan_1 or 0"/></t>
                                                <t style="text-align: center; font-size: 13px;vertical-align: top !important;" t-if="not month_task">0</t>
                                            </td>
                                        </t>
                                    </tr>
                                    <!-- Actual row -->
                                    <tr>
                                        <td style="text-align: center;vertical-align: top !important;padding-top: 5px;">Actual</td>
                                        <t t-foreach="months" t-as="month_name">
                                            <td style="text-align: center; font-size: 13px;
                       color: white;vertical-align: top; "
                t-attf-style="background-color: #{'green' if (subtask.child_ids.filtered(lambda m: month_name.lower() in m.name.lower())[0].actual_1 or 0) &gt;= (subtask.child_ids.filtered(lambda m: month_name.lower() in m.name.lower())[0].plan_1 or 0) else 'red'};text-align: center; font-size: 13px;
                       color: white;vertical-align: top;">
                                                <t t-set="month_task" t-value="subtask.child_ids.filtered(lambda m: month_name.lower() in m.name.lower())"/>
                                                <t t-if="month_task">
                                                    <t style="text-align: center; font-size: 13px;vertical-align: top !important;" t-esc="month_task[0].actual_1 or 0"/></t>
                                                <t style="text-align: center; font-size: 13px;vertical-align: top !important;" t-if="not month_task">0</t>
                                            </td>
                                        </t>
                                    </tr>
                                </t>
                            </t>
                        </tbody>
                    </table>
                </div>
            </t>
        </t>
    </template>
    <record id="paperformat_pag_landscape" model="report.paperformat">
        <field name="name">PAU Landscape Format</field>
        <field name="format">A4</field>
        <field name="orientation">Landscape</field>
        <field name="margin_top">52</field>
        <field name="margin_bottom">15</field>
        <field name="margin_left">0</field>
        <field name="margin_right">0</field>
        <field name="default" eval="False"/>
    </record>
    <record id="action_pag_scoreboard_report" model="ir.actions.report">
        <field name="name">Scoreboard Report</field>
        <field name="model">scoreboard.wizard</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">pag_customizations.report_pag_scoreboard</field>
        <field name="report_file">pag_customizations.report_pag_scoreboard</field>
        <field name="paperformat_id" ref="pag_customizations.paperformat_pag_landscape"/>
        <field name="binding_model_id" ref="project.model_project_task"/>
    </record>
</odoo>